var buffer = require('buffer')

if (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) ***REMOVED***
  module.exports = buffer
***REMOVED*** else ***REMOVED***
  // Copy properties from require('buffer')
  Object.keys(buffer).forEach(function (prop) ***REMOVED***
    exports[prop] = buffer[prop]
  ***REMOVED***)
  exports.Buffer = SafeBuffer
***REMOVED***

function SafeBuffer (arg, encodingOrOffset, length) ***REMOVED***
  return Buffer(arg, encodingOrOffset, length)
***REMOVED***

// Copy static methods from Buffer
Object.keys(Buffer).forEach(function (prop) ***REMOVED***
  SafeBuffer[prop] = Buffer[prop]
***REMOVED***)

SafeBuffer.from = function (arg, encodingOrOffset, length) ***REMOVED***
  if (typeof arg === 'number') ***REMOVED***
    throw new TypeError('Argument must not be a number')
  ***REMOVED***
  return Buffer(arg, encodingOrOffset, length)
***REMOVED***

SafeBuffer.alloc = function (size, fill, encoding) ***REMOVED***
  if (typeof size !== 'number') ***REMOVED***
    throw new TypeError('Argument must be a number')
  ***REMOVED***
  var buf = Buffer(size)
  if (fill !== undefined) ***REMOVED***
    if (typeof encoding === 'string') ***REMOVED***
      buf.fill(fill, encoding)
    ***REMOVED*** else ***REMOVED***
      buf.fill(fill)
    ***REMOVED***
  ***REMOVED*** else ***REMOVED***
    buf.fill(0)
  ***REMOVED***
  return buf
***REMOVED***

SafeBuffer.allocUnsafe = function (size) ***REMOVED***
  if (typeof size !== 'number') ***REMOVED***
    throw new TypeError('Argument must be a number')
  ***REMOVED***
  return Buffer(size)
***REMOVED***

SafeBuffer.allocUnsafeSlow = function (size) ***REMOVED***
  if (typeof size !== 'number') ***REMOVED***
    throw new TypeError('Argument must be a number')
  ***REMOVED***
  return buffer.SlowBuffer(size)
***REMOVED***
