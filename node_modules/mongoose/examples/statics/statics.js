var mongoose = require('../../lib');


// import the schema
require('./person.js')();

// grab the person model object
var Person = mongoose.model('Person');

// connect to a server to do a quick write / read example

mongoose.connect('mongodb://localhost/persons', function(err) ***REMOVED***
  if (err) ***REMOVED***
    throw err;
  ***REMOVED***

  Person.create(***REMOVED***name: 'bill', age: 25, birthday: new Date().setFullYear((new Date().getFullYear() - 25))***REMOVED***,
      function(err, bill) ***REMOVED***
        if (err) ***REMOVED***
          throw err;
        ***REMOVED***
        console.log('People added to db: %s', bill.toString());

        // using the static
        Person.findPersonByName('bill', function(err, result) ***REMOVED***
          if (err) ***REMOVED***
            throw err;
          ***REMOVED***

          console.log(result);
          cleanup();
        ***REMOVED***);
      ***REMOVED***
  );
***REMOVED***);

function cleanup() ***REMOVED***
  Person.remove(function() ***REMOVED***
    mongoose.disconnect();
  ***REMOVED***);
***REMOVED***
