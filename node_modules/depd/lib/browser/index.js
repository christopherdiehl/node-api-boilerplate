/*!
 * depd
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */

'use strict'

/**
 * Module exports.
 * @public
 */

module.exports = depd

/**
 * Create deprecate for namespace in caller.
 */

function depd(namespace) ***REMOVED***
  if (!namespace) ***REMOVED***
    throw new TypeError('argument namespace is required')
  ***REMOVED***

  function deprecate(message) ***REMOVED***
    // no-op in browser
  ***REMOVED***

  deprecate._file = undefined
  deprecate._ignored = true
  deprecate._namespace = namespace
  deprecate._traced = false
  deprecate._warned = Object.create(null)

  deprecate.function = wrapfunction
  deprecate.property = wrapproperty

  return deprecate
***REMOVED***

/**
 * Return a wrapped function in a deprecation message.
 *
 * This is a no-op version of the wrapper, which does nothing but call
 * validation.
 */

function wrapfunction(fn, message) ***REMOVED***
  if (typeof fn !== 'function') ***REMOVED***
    throw new TypeError('argument fn must be a function')
  ***REMOVED***

  return fn
***REMOVED***

/**
 * Wrap property in a deprecation message.
 *
 * This is a no-op version of the wrapper, which does nothing but call
 * validation.
 */

function wrapproperty(obj, prop, message) ***REMOVED***
  if (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) ***REMOVED***
    throw new TypeError('argument obj must be object')
  ***REMOVED***

  var descriptor = Object.getOwnPropertyDescriptor(obj, prop)

  if (!descriptor) ***REMOVED***
    throw new TypeError('must call property on owner object')
  ***REMOVED***

  if (!descriptor.configurable) ***REMOVED***
    throw new TypeError('property must be configurable')
  ***REMOVED***

  return
***REMOVED***
